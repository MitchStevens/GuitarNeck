// Generated by purs version 0.11.7
"use strict";
var $foreign = require("./foreign");
var Control_Applicative = require("../Control.Applicative");
var Control_Bind = require("../Control.Bind");
var Control_Monad_Aff = require("../Control.Monad.Aff");
var Control_Monad_Aff_AVar = require("../Control.Monad.Aff.AVar");
var Control_Monad_Eff = require("../Control.Monad.Eff");
var Control_Monad_Eff_Class = require("../Control.Monad.Eff.Class");
var Control_Monad_Eff_Console = require("../Control.Monad.Eff.Console");
var Data_Either = require("../Data.Either");
var Data_Function = require("../Data.Function");
var Data_HeytingAlgebra = require("../Data.HeytingAlgebra");
var Data_List = require("../Data.List");
var Data_Ord = require("../Data.Ord");
var Data_Unit = require("../Data.Unit");
var Prelude = require("../Prelude");
var Test_Unit = require("../Test.Unit");
var Test_Unit_Console = require("../Test.Unit.Console");
var Test_Unit_Output_Fancy = require("../Test.Unit.Output.Fancy");
var Test_Unit_Output_Simple = require("../Test.Unit.Output.Simple");
var Test_Unit_Output_TAP = require("../Test.Unit.Output.TAP");
var runTestWith = function (runner) {
    return function (suite) {
        return Control_Bind.bind(Control_Monad_Aff.bindAff)(Control_Bind.bind(Control_Monad_Aff.bindAff)(runner(Test_Unit.filterTests(suite)))(Test_Unit.collectResults))(function (v) {
            var errs = Test_Unit.keepErrors(v);
            var $5 = Data_List.length(errs) > 0;
            if ($5) {
                return Control_Monad_Eff_Class.liftEff(Control_Monad_Aff.monadEffAff)($foreign.exit(1));
            };
            return Control_Applicative.pure(Control_Monad_Aff.applicativeAff)(Data_Unit.unit);
        });
    };
};
var run = function (e) {
    var successHandler = function (v) {
        return Control_Applicative.pure(Control_Monad_Eff.applicativeEff)(Data_Unit.unit);
    };
    var errorHandler = function (v) {
        return $foreign.exit(1);
    };
    return function __do() {
        var v = Control_Monad_Aff.runAff(Data_Either.either(errorHandler)(successHandler))(e)();
        return Data_Unit.unit;
    };
};
var runTest = function (suite) {
    var runner = (function () {
        if (Test_Unit_Output_TAP.requested) {
            return Test_Unit_Output_TAP.runTest;
        };
        var $7 = Test_Unit_Console.hasStderr && Test_Unit_Console.hasColours;
        if ($7) {
            return Test_Unit_Output_Fancy.runTest;
        };
        return Test_Unit_Output_Simple.runTest;
    })();
    return run(runTestWith(runner)(suite));
};
module.exports = {
    runTest: runTest,
    runTestWith: runTestWith,
    run: run,
    exit: $foreign.exit
};
